var AWS = require('aws-sdk/lib/core');

AWS.util.isBrowser = function() { return true; };
AWS.util.isNode = function() { return false; };

// react-native specific modules
AWS.util.crypto.lib = require('aws-sdk/lib/browserCryptoLib');
AWS.util.Buffer = require('buffer/').Buffer;
AWS.util.url = require('url/');
AWS.util.querystring = require('querystring/');
AWS.util.realClock = require('aws-sdk/lib/realclock/browserClock');
AWS.util.environment = 'js-react-native';
AWS.util.createEventStream = require('aws-sdk/lib/event-stream/buffered-create-event-stream').createEventStream;

/**
 * @api private
 */
module.exports = AWS;

require('aws-sdk/lib/credentials');
require('aws-sdk/lib/credentials/credential_provider_chain');
require('aws-sdk/lib/credentials/temporary_credentials');
require('aws-sdk/lib/credentials/chainable_temporary_credentials');
require('aws-sdk/lib/credentials/web_identity_credentials');
require('aws-sdk/lib/credentials/cognito_identity_credentials');
require('aws-sdk/lib/credentials/saml_credentials');

// Load the DOMParser XML parser
AWS.XML.Parser = require('aws-sdk/lib/xml/node_parser');

// Load the XHR HttpClient
require('aws-sdk/lib/http/xhr');

// add custom request event handlers
var addContentType = require('aws-sdk/lib/react-native/add-content-type').addContentType;
AWS.EventListeners.Core.addNamedListeners(function(add) {
  add('ADD_CONTENT_TYPE', 'afterBuild', addContentType);
});

if (typeof process === 'undefined') {
  process = {};
}
process.browser = true;
